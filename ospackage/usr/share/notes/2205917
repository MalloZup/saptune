# 2205917 - SAP HANA DB: Recommended OS settings for SLES 12 / SLES for SAP Applications 12
# Description:    HANA DB settings
# Version 42 from 02.03.2018 in English

[version]
# SAP-NOTE=2205917 VERSION=42 DATE=02.03.2018 NAME="SAP HANA DB: Recommended OS settings for SLES 12 / SLES for SAP Applications 12"

[vm]
# Disable transparent hugepages (THP, applies to Intel-based systems only)
# changes /sys/kernel/mm/transparent_hugepage/enabled
# 'never' to disable, 'always' to enable
THP=never

# Kernel Samepage Merging (KSM). KSM allows for an application to register with
# the kernel so as to have its memory pages merged with other processes that
# also register to have their pages merged. For KVM the KSM mechanism allows
# for guest virtual machines to share pages with each other. In todays
# environment where many of the guest operating systems like XEN, KVM are
# similar and are running on same host machine, this can result in significant
# memory savings, the default value is set to 0.
# ATTENTION: /usr/share/saptune/note/SUSE-GUIDE-01 will change it to 1, if
# activated after note 2205917 or solution HANA
KSM=0

[cpu]
force_latency=70

# Energy Performance Bias EPB (applies to Intel-based systems only)
# energy_perf_bias: performance - 0, normal - 6, powersave - 15
# cpupower set -b 0, if system supports Intel's performance bias setting
# if system does not support Intel's performance bias setting - 'all:none' 
# is used in verify table
energy_perf_bias=performance

# The clock frequency and voltage of modern CPUs can scale, in order to save
# energy when thereâ€™s less work to be done. However HANA as a high-performance
# database benefits from high CPU frequencies.
governor=performance

[login]
UserTasksMax=infinity

[sysctl]
# Turn off autoNUMA balancing
# 0 to disable, 1 to enable
kernel.numa_balancing=0

[rpm]
# rpm to check | os version | expected package version 
# kernel check
# XFS fix
#kernel-default SLES12SP0 3.12.51-52.31.1
#kernel-default SLES12SP1 3.12.51-60.20.2
# security
#kernel-default SLES12SP0 3.12.61-52.72.1
#kernel-default SLES12SP1 3.12.74-60.64.40.1
# bug fixing
#kernel-default SLES12SP2 4.4.74-92.35.1

# dependencies handled by saptune package installation
kernel 12-SP3 4.4.103-6.38
systemd 12-SP2 228-142.1
glibc 12-SP2 2.22-51.6
sapinit-systemd-compat_12-SP0 12-SP0 1.0-2.1
sapinit-systemd-compat_12-SP1 12-SP1 1.0-2.1

[grub]
# /etc/default/grub GRUB_CMDLINE_LINUX_DEFAULT
# saptune only checks the values. Changing the grub configuration is not
# supported by saptune
# some of these values are set by saptune during runtime, so changing the
# grub configuration is possible but not needed
#
# Configure C-States for lower latency in Linux (applies to Intel-based systems
# only)
intel_idle.max_cstate=1
processor.max_cstate=1

# Turn off autoNUMA balancing - see kernel.numa_balancing in section [sysctl]
# numa_balancing=disable
# Disable transparent hugepages - see THP=never in section [vm]
# transparent_hugepage=never

[reminder]
# IBM EnergyScale for POWER8 Processor-Based Systems (applies to IBM Power systems only) - not supported by saptune!
